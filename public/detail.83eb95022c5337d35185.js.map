{"version":3,"sources":["webpack:///./app/api/topic.js","webpack:///./app/component/comment-form/index.jsx","webpack:///./app/component/comment-item/comment-item.scss?1aac","webpack:///./app/component/comment-item/index.jsx","webpack:///./app/component/comment-list/index.jsx","webpack:///./app/component/pagination/index.jsx","webpack:///./app/component/pagination/pagination.scss?302c","webpack:///./app/component/tag-item/index.jsx","webpack:///./app/component/tags/index.jsx","webpack:///./app/component/topic-detail/index.jsx","webpack:///./app/component/topic-detail/topic-detail.scss?c44c","webpack:///./app/container/detail.jsx","webpack:///./common/validate.js","webpack:///./common/validation/comment.js","webpack:///./app/component/comment-item/comment-item.scss","webpack:///./app/component/pagination/pagination.scss","webpack:///./app/component/topic-detail/topic-detail.scss"],"names":["_type","__webpack_require__","_api","Api","create","url","method","actionType","CREATE_TOPIC","update","UPDATE_TOPIC","list","LOAD_TOPIC_LIST","view","LOAD_TOPIC_DETAIL","comments","LOAD_COMMENT_LIST","addComment","ADD_COMMENT","stick","STICK_TOPIC","_react","CommentForm","props","_classCallCheck","this","_this","_possibleConstructorReturn","__proto__","Object","getPrototypeOf","call","state","formData","content","validateResult","Component","e","target","value","ret","_validate2","default","rules","setState","_this2","_state","isValid","res","onSave","then","_this3","contentClassNames","_classnames2","form-control","is-valid","is-invalid","_react2","createElement","htmlFor","className","id","placeholder","onChange","handleFieldChange","cols","rows","errors","type","disabled","loading","onClick","handleSave","module","i","options","hmr","transform","locals","exports","_util","converter","showdown","Converter","CommentItem","comment","src","user","avatarURL","alt","nickName","href","formatDatetime","createTime","dangerouslySetInnerHTML","__html","makeHtml","propTypes","PropTypes","object","func","defaultProps","CommentList","_props","commentList","onItemClick","length","map","item","_commentItem2","key","renderCommentList","bool","array","Pagination","PureComponent","delta","preventDefault","page","pageCount","targetPage","onChangePage","pageSize","total","parseInt","aria-label","handleChangePage","tabIndex","number","_reactRouterDom","TagItem","tag","stopPropagation","history","push","handleClick","name","topicCount","string","withRouter","Tags","onTagClick","tags","_tagItem2","TopicDetail","topic","onStick","onEdit","stickable","editable","title","Fragment","handleStick","isSticked","handleEdit","_tags2","renderTopic","_reactRedux","Detail","topicId","topicApi","params","loadCommentList","match","arguments","undefined","data","userProfile","topicLoading","commentListLoading","addNewCommentLoading","_topicDetail2","isAdmin","userId","handleStickTopic","handleEditTopic","_commentList2","handleViewCommentDetail","_pagination2","handleCommentPageChange","_commentForm2","handleSaveComment","connect","validatorList","keys","forEach","field","fieldValRet","validateField","error","fieldRules","_ref","validator","extraArgs","_ref$reverse","reverse","_ref$message","message","isCustom","validatorFunc","Error","validatorArgs","Array","isArray","concat","_toConsumableArray","min"],"mappings":"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","file":"detail.83eb95022c5337d35185.js","sourcesContent":["import { CREATE_TOPIC, UPDATE_TOPIC, STICK_TOPIC, LOAD_TOPIC_LIST, LOAD_TOPIC_DETAIL, LOAD_COMMENT_LIST, ADD_COMMENT } from '../redux/type'\nimport Api from './api'\n\nexport default new Api({\n    create: {\n        url: '/api/topic',\n        method: 'post',\n        actionType: CREATE_TOPIC\n    },\n    update: {\n        url: '/api/topic/:id',\n        method: 'put',\n        actionType: UPDATE_TOPIC\n    },\n    list: {\n        url: '/api/topic',\n        actionType: LOAD_TOPIC_LIST\n    },\n    view: {\n        url: '/api/topic/:id',\n        actionType: LOAD_TOPIC_DETAIL\n    },\n    comments: {\n        url: '/api/topic/:id/comment',\n        actionType: LOAD_COMMENT_LIST\n    },\n    addComment: {\n        method: 'post',\n        url: '/api/topic/:id/comment',\n        actionType: ADD_COMMENT\n    },\n    stick: {\n        method: 'post',\n        url: '/api/topic/:id/stick',\n        actionType: STICK_TOPIC\n    }\n})\n","import React, { Component } from 'react'\nimport classnames from 'classnames'\nimport validate from '../../../common/validate'\nimport rules from '../../../common/validation/comment'\n\nclass CommentForm extends Component {\n    constructor (props) {\n        super(props)\n        this.state = {\n            formData: { content: '' },\n            validateResult: null\n        }\n    }\n    handleFieldChange (e) {\n        const content = e.target.value\n        const ret = validate({ content }, rules)\n        this.setState({\n            formData: { content },\n            validateResult: ret\n        })\n    }\n    handleSave () {\n        const { validateResult, formData } = this.state\n        if (!validateResult.isValid) return\n        const res = this.props.onSave(formData.content)\n        if (res && res.then) {\n            res.then(() => this.setState({ formData: { content: '' } }))\n        }\n    }\n    render () {\n        const { validateResult } = this.state\n        const contentClassNames = classnames({\n            'form-control': true,\n            'is-valid': validateResult && validateResult.isValid,\n            'is-invalid': validateResult && !validateResult.isValid\n        })\n        return (\n            <div>\n                <strong><label htmlFor=\"comment-content\">发表新评论</label></strong>\n                <div className=\"mb-3\">\n                    <textarea\n                        id=\"comment-content\"\n                        placeholder=\"请输入你对这个主题的看法……\"\n                        value={this.state.formData.content}\n                        onChange={e => this.handleFieldChange(e)}\n                        className={contentClassNames}\n                        cols=\"30\"\n                        rows=\"5\"\n                    />\n                    <div className=\"invalid-feedback\">{validateResult && (validateResult.errors || {}).content}</div>\n                </div>\n                <button\n                    className=\"btn btn-primary\"\n                    type=\"button\"\n                    disabled={this.props.loading || !this.state.formData.content}\n                    onClick={() => this.handleSave()}\n                >{this.props.loading ? '正在提交...' : '提交评论'}</button>\n            </div>\n        )\n    }\n}\n\nexport default CommentForm\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js??ref--6-2!../../../node_modules/sass-loader/lib/loader.js!./comment-item.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js??ref--6-2!../../../node_modules/sass-loader/lib/loader.js!./comment-item.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js??ref--6-2!../../../node_modules/sass-loader/lib/loader.js!./comment-item.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport showdown from 'showdown'\nimport { formatDatetime } from '../../util'\n\nimport './comment-item.scss'\n\nconst converter = new showdown.Converter()\n\nclass CommentItem extends Component {\n    render () {\n        const { comment } = this.props\n        if (!comment) return null\n        return (\n            <div onClick={() => this.props.onClick(comment)} className=\"comment-item list-group-item list-group-item-action flex-column\">\n                <div className=\"d-flex w-100 align-items-center mb-3\">\n                    <img src={comment.user.avatarURL} alt={comment.user.nickName} className=\"avatar mr-2\" />\n                    <small><a href=\"#\">{comment.user.nickName}</a> 发布于 {formatDatetime(comment.createTime)}</small>\n                </div>\n                <p\n                    dangerouslySetInnerHTML={{ __html: converter.makeHtml(comment.content) }}\n                    className=\"mb-1\"\n                />\n            </div>\n        )\n    }\n}\n\nCommentItem.propTypes = {\n    comment: PropTypes.object,\n    onClick: PropTypes.func\n}\n\nCommentItem.defaultProps = {\n    comment: null,\n    onClick: () => null\n}\n\nexport default CommentItem\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport CommentItem from '../comment-item'\n\nclass CommentList extends Component {\n    renderCommentList () {\n        const { loading, commentList, onItemClick } = this.props\n        if (loading && commentList.length === 0) {\n            return (\n                <div className=\"card\">\n                    <div className=\"card-body\">正在加载评论列表...</div>\n                </div>\n            )\n        }\n        if (commentList.length === 0) {\n            return (\n                <div className=\"card\">\n                    <div className=\"card-body\">还没有评论，快来抢沙发吧</div>\n                </div>\n            )\n        }\n        return commentList.map(item => (\n            <CommentItem\n                key={item.id}\n                comment={item}\n                onClick={comment => onItemClick(comment)}\n            />\n        ))\n    }\n    render () {\n        return (\n            <div className=\"comment-list\">\n                <div className=\"mb-2\">\n                    <strong>评论列表</strong>\n                </div>\n                {this.renderCommentList()}\n            </div>\n        )\n    }\n}\n\nCommentList.propTypes = {\n    loading: PropTypes.bool,\n    commentList: PropTypes.array,\n    onItemClick: PropTypes.func\n}\n\nCommentList.defaultProps = {\n    loading: false,\n    commentList: [],\n    onItemClick: () => null\n}\n\nexport default CommentList\n","import React, { PureComponent } from 'react'\nimport PropTypes from 'prop-types'\n\nimport './pagination.scss'\n\nclass Pagination extends PureComponent {\n    handleChangePage (e, delta) {\n        e.preventDefault()\n        const { page } = this.props\n        const pageCount = this.pageCount()\n        const targetPage = page + delta\n        if (page === 0 || page > pageCount) return\n        this.props.onChangePage(targetPage)\n    }\n    pageCount () {\n        const { pageSize, total } = this.props\n        const pageCount = parseInt(total / pageSize)\n        return total % pageSize === 0 ? pageCount : pageCount + 1\n    }\n    render () {\n        const { page } = this.props\n        const pageCount = this.pageCount()\n        return (\n            <nav className=\"pager\" aria-label=\"Page navigation\">\n                <ul className=\"pagination\">\n                    <li className={`page-item ${page <= 1 ? 'disabled' : ''}`}>\n                        <a className=\"page-link\" href=\"#\" onClick={e => this.handleChangePage(e, -1)} tabIndex=\"-1\">上一页</a>\n                    </li>\n                    <li className=\"page-item\"><div className=\"page-link\">第 {page} 页，共 {pageCount} 页</div></li>\n                    <li className={`page-item ${page >= pageCount ? 'disabled' : ''}`}>\n                        <a className=\"page-link\" href=\"#\" onClick={e => this.handleChangePage(e, 1)}>下一页</a>\n                    </li>\n                </ul>\n            </nav>\n        )\n    }\n}\n\nPagination.propTypes = {\n    onChangePage: PropTypes.func,\n    total: PropTypes.number,\n    pageSize: PropTypes.number,\n    page: PropTypes.number\n}\n\nPagination.defaultProps = {\n    onChangePage: () => null,\n    total: 0,\n    pageSize: 30,\n    page: 1\n}\n\nexport default Pagination\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js??ref--6-2!../../../node_modules/sass-loader/lib/loader.js!./pagination.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js??ref--6-2!../../../node_modules/sass-loader/lib/loader.js!./pagination.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js??ref--6-2!../../../node_modules/sass-loader/lib/loader.js!./pagination.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { withRouter } from 'react-router-dom'\n\nclass TagItem extends Component {\n    handleClick (e, tag) {\n        e.stopPropagation()\n        e.preventDefault()\n        this.props.history.push(`/tag/${tag.id}`)\n    }\n    render () {\n        const { tag, className } = this.props\n        if (!tag) return null\n        return (\n            <a\n                href=\"#\"\n                key={tag.id}\n                className={`badge badge-primary ${className}`}\n                onClick={e => this.handleClick(e, tag)}\n            >\n                {tag.name} {tag.topicCount ? `- ${tag.topicCount}` : ''}\n            </a>\n        )\n    }\n}\n\nTagItem.propTypes = {\n    className: PropTypes.string,\n    tag: PropTypes.object,\n    history: PropTypes.object\n}\n\nTagItem.defaultProps = {\n    className: '',\n    tag: null,\n    history: null\n}\n\nexport default withRouter(TagItem)\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport TagItem from '../tag-item'\n\nclass Tags extends Component {\n    handleTagItemClick (e, tag) {\n        e.preventDefault()\n        this.props.onTagClick(tag)\n    }\n    render () {\n        const { tags, loading } = this.props\n        if (loading && tags.length === 0) return '正在加载标签列表...'\n        if (tags.length === 0) return '没有标签。'\n        return (\n            <div className=\"tags\">\n                {\n                    this.props.tags.map(tag => (\n                        <TagItem\n                            key={tag.id}\n                            className=\"mr-1\"\n                            tag={tag}\n                        />\n                    ))\n                }\n            </div>\n        )\n    }\n}\n\nTags.propTypes = {\n    tags: PropTypes.array,\n    loading: PropTypes.bool,\n    onTagClick: PropTypes.func\n}\n\nTags.defaultProps = {\n    tags: [],\n    loading: false,\n    onTagClick: () => null\n}\n\nexport default Tags\n","import React, { PureComponent, Fragment } from 'react'\nimport PropTypes from 'prop-types'\nimport showdown from 'showdown'\nimport Tags from '../tags'\nimport { formatDatetime } from '../../util'\nimport './topic-detail.scss'\n\nconst converter = new showdown.Converter()\n\nexport default class TopicDetail extends PureComponent {\n    handleStick (e, topic) {\n        e.preventDefault()\n        this.props.onStick(topic)\n    }\n    handleEdit (e, topic) {\n        e.preventDefault()\n        this.props.onEdit(topic)\n    }\n    renderTopic () {\n        const { loading, topic, stickable, editable } = this.props\n        if (loading) return '正在加载主题详情...'\n        if (!loading && !topic) return '未获取到主题详情，可能已经被删除或者压根不存在。'\n        const { title, content, tags, user, createTime } = topic\n        return (\n            <Fragment>\n                <h5 className=\"card-title\">{title}</h5>\n                <div className=\"mb-3\">\n                    <small><a href=\"#\">{user && user.nickName}</a> 发表于 {formatDatetime(createTime)}</small>\n                    <small>\n                        { stickable && <a href=\"#\" className=\"ml-3\" onClick={e => this.handleStick(e, topic)}>{topic.isSticked ? '取消置顶' : '置顶'}</a>}\n                        { editable && <a href=\"#\" className=\"ml-3\" onClick={e => this.handleEdit(e, topic)}>编辑</a>}\n                    </small>\n                </div>\n                <div dangerouslySetInnerHTML={{ __html: converter.makeHtml(content) }} />\n                <div className=\"mb-1\"><Tags tags={tags} /></div>\n            </Fragment>\n        )\n    }\n    render () {\n        return (\n            <div className=\"card mb-3\">\n                <div className=\"card-body\">\n                    {this.renderTopic()}\n                </div>\n            </div>\n        )\n    }\n}\n\nTopicDetail.propTypes = {\n    topic: PropTypes.object,\n    loading: PropTypes.bool,\n    stickable: PropTypes.bool,\n    editable: PropTypes.bool,\n    onStick: PropTypes.func,\n    onEdit: PropTypes.func\n}\n\nTopicDetail.defaultProps = {\n    topic: {},\n    loading: false,\n    stickable: false,\n    editable: false,\n    onStick: () => null,\n    onEdit: () => null\n}\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js??ref--6-2!../../../node_modules/sass-loader/lib/loader.js!./topic-detail.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js??ref--6-2!../../../node_modules/sass-loader/lib/loader.js!./topic-detail.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js??ref--6-2!../../../node_modules/sass-loader/lib/loader.js!./topic-detail.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","import React, { PureComponent } from 'react'\nimport { connect } from 'react-redux'\n\nimport topicApi from '../api/topic'\n\nimport Pagination from '../component/pagination'\nimport TopicDetail from '../component/topic-detail'\nimport CommentList from '../component/comment-list'\nimport CommentForm from '../component/comment-form'\n\nclass Detail extends PureComponent {\n    componentDidMount () {\n        const topicId = this.topicId()\n        const { topic } = this.props\n        if (!topic || topicId !== topic.id) {\n            topicApi.view({ params: { id: topicId } }, { topicId })\n        }\n        this.loadCommentList()\n    }\n    toHome () {\n        this.props.history.push('/')\n    }\n    topicId () {\n        return parseInt(this.props.match.params.id, 10)\n    }\n    loadCommentList (page = 1) {\n        topicApi.comments({ params: { id: this.topicId() } }, { topicId: this.topicId() })\n    }\n    handleCommentPageChange (page) {\n        this.loadCommentList(page)\n    }\n    handleViewCommentDetail (comment) {\n        this.props.history.push(`/comment/${comment.id}`)\n    }\n    handleSaveComment (content) {\n        const topicId = this.topicId()\n        return topicApi.addComment({\n            params: { id: topicId },\n            data: { content }\n        }, { topicId })\n    }\n    handleStickTopic (topic) {\n        return topicApi.stick({\n            params: { id: topic.id }\n        })\n    }\n    handleEditTopic (topic) {\n        this.props.history.push(`/topic/${topic.id}/edit`)\n    }\n    render () {\n        const { userProfile, topic, topicLoading, commentList, commentListLoading, addNewCommentLoading } = this.props\n        return (\n            <div className=\"container mt-4\">\n                <div className=\"row\">\n                    <div className=\"col-12\">\n                        <TopicDetail\n                            topic={topic}\n                            loading={topicLoading}\n                            stickable={userProfile.isAdmin === 1}\n                            editable={topic && userProfile.id === topic.userId}\n                            onStick={topic => this.handleStickTopic(topic)}\n                            onEdit={topic => this.handleEditTopic(topic)}\n                        />\n                        <div className=\"mb-3\">\n                            <CommentList\n                                loading={commentListLoading}\n                                commentList={commentList.list}\n                                onItemClick={comment => this.handleViewCommentDetail(comment)}\n                            />\n                        </div>\n                        {\n                            commentList.total > 0 && (\n                                <div className=\"mb-3\">\n                                    <Pagination\n                                        page={commentList.page}\n                                        total={commentList.total}\n                                        pageSize={commentList.pageSize}\n                                        onChangePage={page => this.handleCommentPageChange(page)}\n                                    />\n                                </div>\n                            )\n                        }\n                        <div className=\"mb-3\">\n                            <CommentForm\n                                loading={addNewCommentLoading}\n                                onSave={comment => this.handleSaveComment(comment)}\n                            />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default connect(state => state)(Detail)\n","const validatorList = require('validator')\n\n/**\n *\n * @param {Object} data\n * @param {Object} rules {\n *      someField: [\n *          {\n *              validator: 'isLength',\n *              reverse: false,\n *              message: '',\n *              extraArgs: {}\n *          }\n *      ]\n * }\n * @param {*} messages\n */\nmodule.exports = function validate (data, rules) {\n    const ret = { isValid: true, data: null, errors: null }\n    if (!rules) return ret\n    const safeFields = Object.keys(rules)\n    safeFields.forEach(field => {\n        const fieldValRet = module.exports.validateField(data[field], rules[field], data)\n        if (fieldValRet.isValid) {\n            if (!ret.data) ret.data = {}\n            if (data[field] !== undefined) {\n                ret.data[field] = data[field]\n            }\n        } else {\n            ret.isValid = false\n            if (!ret.errors) ret.errors = {}\n            ret.errors[field] = fieldValRet.error\n        }\n    })\n    return ret\n}\n\nmodule.exports.validateField = function (value, fieldRules, formData = null) {\n    const ret = {\n        isValid: true,\n        error: ''\n    }\n    fieldRules.forEach(({ validator, extraArgs, reverse = false, message = '' }) => {\n        if (!ret.isValid) return\n        const isCustom = typeof validator === 'function'\n        const validatorFunc = isCustom ? validator : validatorList[validator]\n        if (!validatorFunc) throw new Error(`${validator} is not a valid validator.`)\n        let validatorArgs\n        if (isCustom) {\n            validatorArgs = [formData]\n        } else {\n            if (!Array.isArray(extraArgs)) {\n                validatorArgs = [extraArgs]\n            } else {\n                validatorArgs = extraArgs\n            }\n        }\n        ret.isValid = validatorFunc(value, ...validatorArgs)\n        ret.isValid = reverse ? !ret.isValid : ret.isValid\n        if (!ret.isValid) {\n            ret.isValid = false\n            ret.error = message\n        }\n    })\n    return ret\n}\n","module.exports = {\n    content: [\n        {\n            validator: 'isEmpty',\n            reverse: true,\n            message: '请输入评论内容'\n        },\n        {\n            validator: 'isLength',\n            extraArgs: {\n                min: 10\n            },\n            message: '让每一条评论都有意义，请至少输入 10 个字符'\n        }\n    ]\n}\n","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".comment-item{cursor:pointer}.comment-item .avatar{width:2rem;height:2rem}\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".pager div.page-link{color:#212529}.pager div.page-link:hover{color:#212529;background-color:#fff;cursor:default}\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n"],"sourceRoot":""}