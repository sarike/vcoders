{"version":3,"sources":["webpack:///./app/api/comment.js","webpack:///./app/component/comment-detail/comment-detail.scss?59bb","webpack:///./app/component/comment-detail/index.jsx","webpack:///./app/component/comment-form/index.jsx","webpack:///./app/component/comment-item/comment-item.scss?1aac","webpack:///./app/component/comment-item/index.jsx","webpack:///./app/component/comment-list/index.jsx","webpack:///./app/component/pagination/index.jsx","webpack:///./app/component/pagination/pagination.scss?302c","webpack:///./app/container/comment.jsx","webpack:///./common/validate.js","webpack:///./common/validation/comment.js","webpack:///./app/component/comment-detail/comment-detail.scss","webpack:///./app/component/comment-item/comment-item.scss","webpack:///./app/component/pagination/pagination.scss"],"names":["_type","__webpack_require__","_api","Api","view","url","actionType","LOAD_COMMENT_DETAIL","replies","LOAD_REPLY_LIST","addReply","method","ADD_REPLY","content","module","i","options","hmr","transform","locals","exports","_react","_util","converter","showdown","Converter","CommentDetail","PureComponent","e","topic","preventDefault","this","props","onViewTopicDetail","comment","onViewParentComment","_this2","parent","user","createTime","_react2","default","createElement","className","dangerouslySetInnerHTML","__html","makeHtml","href","nickName","formatDatetime","onClick","handleViewParentComment","handleViewTopicDetail","title","loading","renderComment","propTypes","PropTypes","bool","object","func","defaultProps","CommentForm","_classCallCheck","_this","_possibleConstructorReturn","__proto__","Object","getPrototypeOf","call","state","formData","validateResult","Component","target","value","ret","_validate2","rules","setState","_state","isValid","res","onSave","then","_this3","contentClassNames","_classnames2","form-control","is-valid","is-invalid","htmlFor","id","placeholder","onChange","handleFieldChange","cols","rows","errors","type","disabled","handleSave","CommentItem","src","avatarURL","alt","CommentList","_props","commentList","onItemClick","length","map","item","_commentItem2","key","renderCommentList","array","Pagination","delta","page","pageCount","targetPage","onChangePage","pageSize","total","parseInt","aria-label","handleChangePage","tabIndex","number","_reactRedux","Detail","commentId","commentApi","params","loadReplies","commentLoading","history","push","match","arguments","undefined","loadCommentList","data","_props2","replyList","replyListLoading","addNewReplyLoading","_commentDetail2","handleViewCommentDetail","_commentList2","list","_pagination2","handleCommentPageChange","_commentForm2","handleSaveComment","connect","validatorList","keys","forEach","field","fieldValRet","validateField","error","fieldRules","_ref","validator","extraArgs","_ref$reverse","reverse","_ref$message","message","isCustom","validatorFunc","Error","validatorArgs","Array","isArray","concat","_toConsumableArray","min"],"mappings":"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","file":"comment.83eb95022c5337d35185.js","sourcesContent":["import { LOAD_REPLY_LIST, ADD_REPLY, LOAD_COMMENT_DETAIL } from '../redux/type'\nimport Api from './api'\n\nexport default new Api({\n    view: {\n        url: '/api/comment/:id',\n        actionType: LOAD_COMMENT_DETAIL\n    },\n    replies: {\n        url: '/api/comment/:id/replies',\n        actionType: LOAD_REPLY_LIST\n    },\n    addReply: {\n        method: 'post',\n        url: '/api/comment/:id/reply',\n        actionType: ADD_REPLY\n    }\n})\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js??ref--6-2!../../../node_modules/sass-loader/lib/loader.js!./comment-detail.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js??ref--6-2!../../../node_modules/sass-loader/lib/loader.js!./comment-detail.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js??ref--6-2!../../../node_modules/sass-loader/lib/loader.js!./comment-detail.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","import React, { PureComponent } from 'react'\nimport PropTypes from 'prop-types'\nimport showdown from 'showdown'\nimport { formatDatetime } from '../../util'\nimport './comment-detail.scss'\n\nconst converter = new showdown.Converter()\n\nexport default class CommentDetail extends PureComponent {\n    handleViewTopicDetail (e, topic) {\n        e.preventDefault()\n        this.props.onViewTopicDetail(topic)\n    }\n    handleViewParentComment (e, comment) {\n        e.preventDefault()\n        this.props.onViewParentComment(comment)\n    }\n    renderComment () {\n        const { comment } = this.props\n        if (!comment) return '未获取到评论详情...'\n        const { topic, parent, content, user, createTime } = comment\n        return (\n            <div>\n                <div className=\"mb-3\" dangerouslySetInnerHTML={{ __html: converter.makeHtml(content) }} />\n                <div className=\"mb-3\" >\n                    <small><a href=\"#\">{user && user.nickName}</a> 评论于 {formatDatetime(createTime)}</small>\n                </div>\n                {\n                    parent && (\n                        <div className=\"origin-comment p-3 mb-3 rounded\">\n                            <a href=\"#\" onClick={e => this.handleViewParentComment(e, parent)}>\n                                原评论：{parent.content}\n                            </a>\n                            <div>\n                                <small>由 {parent.user.nickName} 评论于 {formatDatetime(parent.createTime)}</small>\n                            </div>\n                        </div>\n                    )\n                }\n                <div className=\"origin-topic p-3 rounded\">\n                    <a href=\"#\" onClick={e => this.handleViewTopicDetail(e, topic)}>\n                        原主题：{topic.title}\n                    </a>\n                    <div>\n                        <small>由 {topic.user.nickName} 发布于 {formatDatetime(topic.createTime)}</small>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n    render () {\n        const { loading } = this.props\n        return (\n            <div className=\"card mb-3 comment-detail\">\n                <div className=\"card-body\">\n                    { loading ? '正在加载评论详情...' : this.renderComment()}\n                </div>\n            </div>\n        )\n    }\n}\n\nCommentDetail.propTypes = {\n    loading: PropTypes.bool,\n    comment: PropTypes.object,\n    onViewTopicDetail: PropTypes.func,\n    onViewParentComment: PropTypes.func\n}\n\nCommentDetail.defaultProps = {\n    loading: false,\n    comment: null,\n    onViewTopicDetail: () => null,\n    onViewParentComment: () => null\n}\n","import React, { Component } from 'react'\nimport classnames from 'classnames'\nimport validate from '../../../common/validate'\nimport rules from '../../../common/validation/comment'\n\nclass CommentForm extends Component {\n    constructor (props) {\n        super(props)\n        this.state = {\n            formData: { content: '' },\n            validateResult: null\n        }\n    }\n    handleFieldChange (e) {\n        const content = e.target.value\n        const ret = validate({ content }, rules)\n        this.setState({\n            formData: { content },\n            validateResult: ret\n        })\n    }\n    handleSave () {\n        const { validateResult, formData } = this.state\n        if (!validateResult.isValid) return\n        const res = this.props.onSave(formData.content)\n        if (res && res.then) {\n            res.then(() => this.setState({ formData: { content: '' } }))\n        }\n    }\n    render () {\n        const { validateResult } = this.state\n        const contentClassNames = classnames({\n            'form-control': true,\n            'is-valid': validateResult && validateResult.isValid,\n            'is-invalid': validateResult && !validateResult.isValid\n        })\n        return (\n            <div>\n                <strong><label htmlFor=\"comment-content\">发表新评论</label></strong>\n                <div className=\"mb-3\">\n                    <textarea\n                        id=\"comment-content\"\n                        placeholder=\"请输入你对这个主题的看法……\"\n                        value={this.state.formData.content}\n                        onChange={e => this.handleFieldChange(e)}\n                        className={contentClassNames}\n                        cols=\"30\"\n                        rows=\"5\"\n                    />\n                    <div className=\"invalid-feedback\">{validateResult && (validateResult.errors || {}).content}</div>\n                </div>\n                <button\n                    className=\"btn btn-primary\"\n                    type=\"button\"\n                    disabled={this.props.loading || !this.state.formData.content}\n                    onClick={() => this.handleSave()}\n                >{this.props.loading ? '正在提交...' : '提交评论'}</button>\n            </div>\n        )\n    }\n}\n\nexport default CommentForm\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js??ref--6-2!../../../node_modules/sass-loader/lib/loader.js!./comment-item.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js??ref--6-2!../../../node_modules/sass-loader/lib/loader.js!./comment-item.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js??ref--6-2!../../../node_modules/sass-loader/lib/loader.js!./comment-item.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport showdown from 'showdown'\nimport { formatDatetime } from '../../util'\n\nimport './comment-item.scss'\n\nconst converter = new showdown.Converter()\n\nclass CommentItem extends Component {\n    render () {\n        const { comment } = this.props\n        if (!comment) return null\n        return (\n            <div onClick={() => this.props.onClick(comment)} className=\"comment-item list-group-item list-group-item-action flex-column\">\n                <div className=\"d-flex w-100 align-items-center mb-3\">\n                    <img src={comment.user.avatarURL} alt={comment.user.nickName} className=\"avatar mr-2\" />\n                    <small><a href=\"#\">{comment.user.nickName}</a> 发布于 {formatDatetime(comment.createTime)}</small>\n                </div>\n                <p\n                    dangerouslySetInnerHTML={{ __html: converter.makeHtml(comment.content) }}\n                    className=\"mb-1\"\n                />\n            </div>\n        )\n    }\n}\n\nCommentItem.propTypes = {\n    comment: PropTypes.object,\n    onClick: PropTypes.func\n}\n\nCommentItem.defaultProps = {\n    comment: null,\n    onClick: () => null\n}\n\nexport default CommentItem\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport CommentItem from '../comment-item'\n\nclass CommentList extends Component {\n    renderCommentList () {\n        const { loading, commentList, onItemClick } = this.props\n        if (loading && commentList.length === 0) {\n            return (\n                <div className=\"card\">\n                    <div className=\"card-body\">正在加载评论列表...</div>\n                </div>\n            )\n        }\n        if (commentList.length === 0) {\n            return (\n                <div className=\"card\">\n                    <div className=\"card-body\">还没有评论，快来抢沙发吧</div>\n                </div>\n            )\n        }\n        return commentList.map(item => (\n            <CommentItem\n                key={item.id}\n                comment={item}\n                onClick={comment => onItemClick(comment)}\n            />\n        ))\n    }\n    render () {\n        return (\n            <div className=\"comment-list\">\n                <div className=\"mb-2\">\n                    <strong>评论列表</strong>\n                </div>\n                {this.renderCommentList()}\n            </div>\n        )\n    }\n}\n\nCommentList.propTypes = {\n    loading: PropTypes.bool,\n    commentList: PropTypes.array,\n    onItemClick: PropTypes.func\n}\n\nCommentList.defaultProps = {\n    loading: false,\n    commentList: [],\n    onItemClick: () => null\n}\n\nexport default CommentList\n","import React, { PureComponent } from 'react'\nimport PropTypes from 'prop-types'\n\nimport './pagination.scss'\n\nclass Pagination extends PureComponent {\n    handleChangePage (e, delta) {\n        e.preventDefault()\n        const { page } = this.props\n        const pageCount = this.pageCount()\n        const targetPage = page + delta\n        if (page === 0 || page > pageCount) return\n        this.props.onChangePage(targetPage)\n    }\n    pageCount () {\n        const { pageSize, total } = this.props\n        const pageCount = parseInt(total / pageSize)\n        return total % pageSize === 0 ? pageCount : pageCount + 1\n    }\n    render () {\n        const { page } = this.props\n        const pageCount = this.pageCount()\n        return (\n            <nav className=\"pager\" aria-label=\"Page navigation\">\n                <ul className=\"pagination\">\n                    <li className={`page-item ${page <= 1 ? 'disabled' : ''}`}>\n                        <a className=\"page-link\" href=\"#\" onClick={e => this.handleChangePage(e, -1)} tabIndex=\"-1\">上一页</a>\n                    </li>\n                    <li className=\"page-item\"><div className=\"page-link\">第 {page} 页，共 {pageCount} 页</div></li>\n                    <li className={`page-item ${page >= pageCount ? 'disabled' : ''}`}>\n                        <a className=\"page-link\" href=\"#\" onClick={e => this.handleChangePage(e, 1)}>下一页</a>\n                    </li>\n                </ul>\n            </nav>\n        )\n    }\n}\n\nPagination.propTypes = {\n    onChangePage: PropTypes.func,\n    total: PropTypes.number,\n    pageSize: PropTypes.number,\n    page: PropTypes.number\n}\n\nPagination.defaultProps = {\n    onChangePage: () => null,\n    total: 0,\n    pageSize: 30,\n    page: 1\n}\n\nexport default Pagination\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js??ref--6-2!../../../node_modules/sass-loader/lib/loader.js!./pagination.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js??ref--6-2!../../../node_modules/sass-loader/lib/loader.js!./pagination.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js??ref--6-2!../../../node_modules/sass-loader/lib/loader.js!./pagination.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","import React, { PureComponent } from 'react'\nimport { connect } from 'react-redux'\n\nimport commentApi from '../api/comment'\n\nimport Pagination from '../component/pagination'\nimport CommentDetail from '../component/comment-detail'\nimport CommentList from '../component/comment-list'\nimport CommentForm from '../component/comment-form'\n\nclass Detail extends PureComponent {\n    componentDidMount () {\n        const commentId = this.commentId()\n        const { comment } = this.props\n        if (!comment || commentId !== comment.id) {\n            commentApi.view({ params: { id: commentId } }, { commentId })\n        }\n        this.loadReplies()\n    }\n    componentDidUpdate () {\n        const { comment, commentLoading } = this.props\n        if ((!comment || comment.id !== this.commentId()) && !commentLoading) {\n            const commentId = this.commentId()\n            commentApi.view({ params: { id: commentId } }, { commentId })\n            this.loadReplies()\n        }\n    }\n    toHome () {\n        this.props.history.push('/')\n    }\n    commentId () {\n        return parseInt(this.props.match.params.id, 10)\n    }\n    loadReplies (page = 1) {\n        commentApi.replies({ params: { id: this.commentId() } }, { commentId: this.commentId() })\n    }\n    handleCommentPageChange (page) {\n        this.loadCommentList(page)\n    }\n    handleViewCommentDetail (comment) {\n        this.props.history.push(`/comment/${comment.id}`)\n    }\n    handleViewTopicDetail (topic) {\n        this.props.history.push(`/topic/${topic.id}`)\n    }\n    handleSaveComment (content) {\n        const commentId = this.commentId()\n        return commentApi.addReply({\n            params: { id: commentId },\n            data: { content }\n        }, { commentId })\n    }\n    render () {\n        const { comment, replyList, commentLoading, replyListLoading, addNewReplyLoading } = this.props\n        return (\n            <div className=\"container mt-4\">\n                <div className=\"row\">\n                    <div className=\"col-12\">\n                        <CommentDetail\n                            loading={commentLoading}\n                            comment={comment}\n                            onViewParentComment={comment => this.handleViewCommentDetail(comment)}\n                            onViewTopicDetail={topic => this.handleViewTopicDetail(topic)}\n                        />\n                        <div className=\"mb-3\">\n                            <CommentList\n                                loading={replyListLoading}\n                                commentList={replyList.list}\n                                onItemClick={comment => this.handleViewCommentDetail(comment)}\n                            />\n                        </div>\n                        {\n                            replyList.total > 0 && (\n                                <div className=\"mb-3\">\n                                    <Pagination\n                                        page={replyList.page}\n                                        total={replyList.total}\n                                        pageSize={replyList.pageSize}\n                                        onChangePage={page => this.handleCommentPageChange(page)}\n                                    />\n                                </div>\n                            )\n                        }\n                        <div className=\"mb-3\">\n                            <CommentForm\n                                loading={addNewReplyLoading}\n                                onSave={comment => this.handleSaveComment(comment)}\n                            />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default connect(state => state)(Detail)\n","const validatorList = require('validator')\n\n/**\n *\n * @param {Object} data\n * @param {Object} rules {\n *      someField: [\n *          {\n *              validator: 'isLength',\n *              reverse: false,\n *              message: '',\n *              extraArgs: {}\n *          }\n *      ]\n * }\n * @param {*} messages\n */\nmodule.exports = function validate (data, rules) {\n    const ret = { isValid: true, data: null, errors: null }\n    if (!rules) return ret\n    const safeFields = Object.keys(rules)\n    safeFields.forEach(field => {\n        const fieldValRet = module.exports.validateField(data[field], rules[field], data)\n        if (fieldValRet.isValid) {\n            if (!ret.data) ret.data = {}\n            if (data[field] !== undefined) {\n                ret.data[field] = data[field]\n            }\n        } else {\n            ret.isValid = false\n            if (!ret.errors) ret.errors = {}\n            ret.errors[field] = fieldValRet.error\n        }\n    })\n    return ret\n}\n\nmodule.exports.validateField = function (value, fieldRules, formData = null) {\n    const ret = {\n        isValid: true,\n        error: ''\n    }\n    fieldRules.forEach(({ validator, extraArgs, reverse = false, message = '' }) => {\n        if (!ret.isValid) return\n        const isCustom = typeof validator === 'function'\n        const validatorFunc = isCustom ? validator : validatorList[validator]\n        if (!validatorFunc) throw new Error(`${validator} is not a valid validator.`)\n        let validatorArgs\n        if (isCustom) {\n            validatorArgs = [formData]\n        } else {\n            if (!Array.isArray(extraArgs)) {\n                validatorArgs = [extraArgs]\n            } else {\n                validatorArgs = extraArgs\n            }\n        }\n        ret.isValid = validatorFunc(value, ...validatorArgs)\n        ret.isValid = reverse ? !ret.isValid : ret.isValid\n        if (!ret.isValid) {\n            ret.isValid = false\n            ret.error = message\n        }\n    })\n    return ret\n}\n","module.exports = {\n    content: [\n        {\n            validator: 'isEmpty',\n            reverse: true,\n            message: '请输入评论内容'\n        },\n        {\n            validator: 'isLength',\n            extraArgs: {\n                min: 10\n            },\n            message: '让每一条评论都有意义，请至少输入 10 个字符'\n        }\n    ]\n}\n","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".comment-detail .origin-comment,.comment-detail .origin-topic{background-color:rgba(0,0,0,.05);white-space:nowrap;text-overflow:ellipsis;overflow:hidden}\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".comment-item{cursor:pointer}.comment-item .avatar{width:2rem;height:2rem}\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".pager div.page-link{color:#212529}.pager div.page-link:hover{color:#212529;background-color:#fff;cursor:default}\", \"\"]);\n\n// exports\n"],"sourceRoot":""}